#!/usr/bin/python3


from pexpect import pxssh


def send_command(child, cmd):
    try:
        child.sendline(cmd)
        child.prompt()
        print('{}'.format(child.before.decode('ascii')))
    except Exception as e:
        print("[-] Error running command {}: {}".format(cmd, e))


def main():
    HOST = 'localhost'
    USER = 'root'
    PASSWORD = 'toor'
    try:
        shell = pxssh.pxssh(options={
            "StrictHostKeyChecking": "no",
            "UserKnownHostsFile": "/dev/null"})
        shell.login(HOST, USER, PASSWORD)
    except Exception as e:
        print("[-] Error connecting.{}".format(e))
    send_command(shell, 'cat /etc/shadow | grep root')
    send_command(shell, 'uptime')
    shell.logout()


if __name__ == '__main__':
    main()
