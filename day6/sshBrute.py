#!/usr/bin/python3


# modifcations to make

from pexpect import pxssh


def send_command(s, cmd):
    try:
        s.sendline(cmd)
        s.prompt()
        print('{}'.format(s.before.decode('ascii')))
    except Exception as e:
        print("[-] Error running command {}: {}".format(cmd, e))


def connect(host, user, password):
    try:
        s = pxssh.pxssh(options={
            "StrictHostKeyChecking": "no",
            "UserKnownHostsFile": "/dev/null"})
        s.login(host, user, password)
        return s
    except Exception as e:
        print("[-] Error connecting: {}".format(e))
        exit(0)


def main():
    HOST = 'localhost'
    USER = 'root'
    PASSWORD = 'toor'
    shell = connect(HOST, USER, PASSWORD)
    send_command(shell, 'cat /etc/shadow | grep root')


if __name__ == '__main__':
    main()
